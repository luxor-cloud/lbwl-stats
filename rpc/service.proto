syntax = "proto3";

package service;
option java_package = "dev.freggy.stats.service";
option go_package = "service";

import "model/flash.proto";

//
// Flash
//

// rpc GetFlashMapHighscoreForPlayer

message GetFlashMapHighscoreForPlayerRequest {
    string playerId = 1;
    bool withCheckpoints = 2;
    string mapName = 3;
}

message GetFlashMapHighscoreForPlayerResponse {
    FlashMapStatistic highscore = 1;
}

// rpc GetGlobalFlashMapHighscore

message GetGlobalFlashMapHighscoreRequest {
    string mapName = 1;
    bool withCheckpoints = 2;
}

message GetGlobalFlashMapHighscoreResponse {
    FlashMapStatistic highscore = 1;
}

// rpc GetTopFlashMapHighscores

message GetTopFlashMapHighscoresRequest {
    uint32 limit = 1;
    bool withCheckpoints = 2;
    string mapName = 3;
}

message GetTopFlashMapHighscoresResponse {
    FlashMapStatisticCollection highscores = 1;
}

// GetTopPlayersByPoints

message GetTopPlayersByPointsRequest {
    bool withMapStats = 1;
    bool withCheckpoints = 2;
    bool limit = 3;
}

message GetTopPlayersByPointsResponse {
    repeated FlashAllStatistics topPlayers = 1;
}

// UpdateFlashStatistics

message UpdateFlashStatisticsRequests {
    string playerId = 1;
    FlashAllStatistics stats = 2;
}

message UpdateFlashStatisticsResponse {
}

//
// TryJump
//

// ...

service StatsService {
    rpc GetFlashMapHighscoreForPlayer (GetFlashMapHighscoreForPlayerRequest) returns (GetFlashMapHighscoreForPlayerResponse);

    rpc GetGlobalFlashMapHighscore (GetGlobalFlashMapHighscoreRequest) returns (GetGlobalFlashMapHighscoreResponse);

    rpc GetTopFlashMapHighscores (GetTopFlashMapHighscoresRequest) returns (GetTopFlashMapHighscoresResponse);

    rpc GetTopFlashPlayersByPoints (GetTopPlayersByPointsRequest) returns (GetTopPlayersByPointsResponse);

    rpc UpdateFlashStatistics (UpdateFlashStatisticsRequests) returns (UpdateFlashStatisticsResponse);
}
